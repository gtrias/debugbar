import { defineStore } from 'pinia'

export let useRequestsStore = defineStore('requests', {
  state: () => ({
    requests: [firstHardcodedRequest()],
    strings: [],
  }),
  actions: {
    addRequest(request) {
      this.requests.push(request)
    },
    addStr(str: string) {
      if (this.strings.length > 10) {
        this.strings.shift()
      }
      this.strings.push(str)
    }
    // removeRequest(request) {
    //   this.requests.splice(this.requests.indexOf(request), 1)
    // },
  },
})

function firstHardcodedRequest() {
  return {"id":"dee37cb4-0f4a-4ddb-b290-83a22871f7bd","meta":{"controller":"DemoController","action":"post_list","request":"#<ActionDispatch::Request:0x0000000108a21918>","params":{"controller":"demo","action":"post_list"},"headers":"#<ActionDispatch::Http::Headers:0x00000001083dd048>","format":"html","method":"GET","path":"/post_list","status":200,"view_runtime":42.6120002521202,"db_runtime":7.794999808538705},"models":{"Post":10,"PostAuthor":73,"Author":72},"queries":[{"name":"ActiveRecord::SchemaMigration Load (0.4ms)","sql":"SELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC /*application='DemoApp'*/","duration":0.4,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/debugbar_rb/lib/debugbar_rb/middlewares/request_metrics.rb:9"," `call'"]},{"name":"Post Load (0.2ms)","sql":"SELECT `posts`.* FROM `posts` ORDER BY `posts`.`id` DESC LIMIT 10 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.2,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/controllers/demo_controller.rb:3"," `post_list'"]},{"name":"PostAuthor Load (0.4ms)","sql":"SELECT `post_authors`.* FROM `post_authors` WHERE `post_authors`.`post_id` IN (5000, 4999, 4998, 4997, 4996, 4995, 4994, 4993, 4992, 4991) /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.4,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/controllers/demo_controller.rb:3"," `post_list'"]},{"name":"Author Load (0.4ms)","sql":"SELECT `authors`.* FROM `authors` WHERE `authors`.`id` IN (1325, 652, 1205, 1252, 1007, 1611, 641, 1695, 1433, 1639, 1733, 348, 497, 54, 887, 1934, 1995, 993, 352, 1679, 987, 1644, 1603, 182, 740, 876, 742, 1352, 1293, 1918, 184, 1757, 1884, 1104, 203, 255, 1834, 930, 1341, 1199, 768, 1192, 1643, 991, 687, 1149, 973, 1026, 1214, 1972, 1327, 1266, 612, 379, 1458, 1652, 1483, 1245, 1169, 1459, 1143, 1532, 9, 1859, 1530, 74, 1003, 965, 1993, 1699, 1616, 223) /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.4,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/controllers/demo_controller.rb:3"," `post_list'"]},{"name":"Reaction Count (1.4ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 4991 /*action='post_list',application='DemoApp',controller='demo'*/","duration":1.4,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]},{"name":"Reaction Count (0.2ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 4992 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.2,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]},{"name":"Reaction Count (0.3ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 4993 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.3,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]},{"name":"Reaction Count (0.2ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 4994 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.2,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]},{"name":"Reaction Count (0.3ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 4995 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.3,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]},{"name":"Reaction Count (0.3ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 4996 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.3,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]},{"name":"Reaction Count (0.1ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 4997 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.1,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]},{"name":"Reaction Count (0.3ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 4998 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.3,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]},{"name":"Reaction Count (0.2ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 4999 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.2,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]},{"name":"Reaction Count (0.3ms)","sql":"SELECT COUNT(*) FROM `reactions` WHERE `reactions`.`post_id` = 5000 /*action='post_list',application='DemoApp',controller='demo'*/","duration":0.3,"lock_wait":null,"binds":null,"source":["/Users/julien.bourdeau/Personal/rails/demo_app/app/views/demo/post_list.html.erb:21"," `block in _app_views_demo_post_list_html_erb___4266113366518490578_24300'"]}]}
}
